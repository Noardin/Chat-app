(function(e){function t(t){for(var a,o,u=t[0],c=t[1],i=t[2],d=0,f=[];d<u.length;d++)o=u[d],r[o]&&f.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,i||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={"app~5a11b65b":0},r={"app~5a11b65b":0},s=[];function u(e){return c.p+"js/"+({"about~3ee20405":"about~3ee20405","about~2d898716":"about~2d898716","about~e00b5942":"about~e00b5942","about~6a415538":"about~6a415538","about~a86252e3":"about~a86252e3","about~47fe49b1":"about~47fe49b1","about~0c24c761":"about~0c24c761","about~e0bffda6":"about~e0bffda6"}[e]||e)+"."+{"about~3ee20405":"ccadd85d","about~2d898716":"187e1a93","about~e00b5942":"54a2085f","about~6a415538":"fc287488","about~a86252e3":"ee79edde","about~47fe49b1":"8cedc165","about~0c24c761":"ae45a11b","about~e0bffda6":"60a746f8","chunk-66ff5407":"b0e4ed8e"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"about~a86252e3":1,"about~0c24c761":1,"chunk-66ff5407":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({"about~3ee20405":"about~3ee20405","about~2d898716":"about~2d898716","about~e00b5942":"about~e00b5942","about~6a415538":"about~6a415538","about~a86252e3":"about~a86252e3","about~47fe49b1":"about~47fe49b1","about~0c24c761":"about~0c24c761","about~e0bffda6":"about~e0bffda6"}[e]||e)+"."+{"about~3ee20405":"31d6cfe0","about~2d898716":"31d6cfe0","about~e00b5942":"31d6cfe0","about~6a415538":"31d6cfe0","about~a86252e3":"dbb4691c","about~47fe49b1":"31d6cfe0","about~0c24c761":"e5df4c75","about~e0bffda6":"31d6cfe0","chunk-66ff5407":"a93bd20e"}[e]+".css",r=c.p+a,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var i=s[u],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===a||d===r))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){i=f[u],d=i.getAttribute("data-href");if(d===a||d===r)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.request=a,delete o[e],l.parentNode.removeChild(l),n(s)},l.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(l)}).then(function(){o[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=s);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=u(e),i=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");s.type=a,s.request=o,n[1](s)}r[e]=void 0}};var f=setTimeout(function(){i({type:"timeout",target:d})},12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var f=0;f<i.length;f++)t(i[f]);var l=d;s.push([1,"chunk-vendors~0f485567","chunk-vendors~b8ca4958","chunk-vendors~82b88a00","chunk-vendors~e4173fa2","chunk-vendors~e2149f58","chunk-vendors~ad49f614","chunk-vendors~7274e1de","chunk-vendors~691ceb8b","chunk-vendors~b503ea5a","chunk-vendors~6cc70e79","chunk-vendors~6549ae0f","chunk-vendors~df06dcfd","chunk-vendors~cd9e4e36","chunk-vendors~f7fb30b6","chunk-vendors~f7a6d865","chunk-vendors~4b77270a","chunk-vendors~90bb027c","chunk-vendors~b3be62c5","chunk-vendors~001d965c","chunk-vendors~f1a53c7b","chunk-vendors~d45ae58c","chunk-vendors~a9580bf4","chunk-vendors~04aee175","chunk-vendors~246f2a84","chunk-vendors~33e77f69","chunk-vendors~ea9da270","chunk-vendors~8504f0dc","chunk-vendors~09bdbcaa","chunk-vendors~adad1d55","chunk-vendors~68fae5d3","chunk-vendors~714855b8","chunk-vendors~2805bfd3","chunk-vendors~8aa148dc","chunk-vendors~4f0fe9e8","chunk-vendors~edc107dc","chunk-vendors~aa4519b6","chunk-vendors~d9c5e54b","chunk-vendors~76a25366","chunk-vendors~641b105c","chunk-vendors~4de8c28d","chunk-vendors~ea207835","chunk-vendors~1983c855","chunk-vendors~c8cac344","chunk-vendors~b2ba1f6f","chunk-vendors~c2b0bc75","chunk-vendors~e34125d1","chunk-vendors~83c664c0","chunk-vendors~b7b6a01e","chunk-vendors~caecf0ca","chunk-vendors~f82c8a3e","chunk-vendors~86f69a8a","chunk-vendors~88200352","chunk-vendors~91a4a0a7","chunk-vendors~07bd030b","chunk-vendors~cdbeae1e","chunk-vendors~7fca07be","chunk-vendors~fc754b49","chunk-vendors~bafc8a22","chunk-vendors~9d565eb2","chunk-vendors~8c9d0056","chunk-vendors~1e87661d","chunk-vendors~ef0539b2","chunk-vendors~42a35a25","chunk-vendors~7e5e8261","chunk-vendors~5c956a7a","chunk-vendors~21380ae4","chunk-vendors~bbc1400e","chunk-vendors~f8e72e76","chunk-vendors~5b63aa53","chunk-vendors~4d01349d","chunk-vendors~b58f7129","chunk-vendors~4b106089","chunk-vendors~fdc6512a","chunk-vendors~f51f6df3","chunk-vendors~a342bb6a","chunk-vendors~14543ed6","chunk-vendors~b1f96ece","chunk-vendors~d2305125","chunk-vendors~87de5440","chunk-vendors~3393e5ed","chunk-vendors~436da8d0","chunk-vendors~be7d4c50","chunk-vendors~99720f47","chunk-vendors~e2ec09d4","chunk-vendors~97fa3674","chunk-vendors~bc36c65d","chunk-vendors~0cb4250c","chunk-vendors~9b9380ac","chunk-vendors~d1d77ecf","chunk-vendors~24b41dc3","chunk-vendors~e0090583","chunk-vendors~cd3831ce","chunk-vendors~2edeeb90","chunk-vendors~54f2612f","chunk-vendors~69452bea","app~748942c6","app~9e867b6f","app~05bece6a","app~32ab1a8b","app~e8f40822","app~6e99c981"]),n()})({"0021":function(e,t,n){"use strict";var a=n("3e0e"),o=n.n(a);o.a},"3e0e":function(e,t,n){},"432d":function(e,t,n){"use strict";var a=n("8553"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=n("2f62"),r=n("3dfd"),s=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home",attrs:{id:"chat_wrapper"}},[n("Chat_wiew"),n("Chat_input")],1)},c=[],i=n("0d25"),d=n("f6ed"),f={name:"chat",components:{Chat_wiew:i["a"],Chat_input:d["a"]},data:function(){return{}},methods:{Emit:function(e){this.$store.dispatch("uploadMessage",e).then()}},created:function(){var e=this;this.$socket.on("my response",function(t){return e.Emit(t)})}},l=f,h=(n("0021"),n("2877")),b=Object(h["a"])(l,u,c,!1,null,"50a707ca",null),v=b.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login_wrapper"}},[n("alerts"),e.isAuthenticated?n("div",[n("router-link",{staticClass:".login-link",attrs:{to:"/"}},[e._v("Chat")])],1):e._e(),e.isAuthenticated?e._e():n("div",[n("router-link",{staticClass:".login-link",attrs:{to:"/register"}},[e._v("register")])],1),n("Loginform")],1)},k=[],m=n("cc2a"),g=n("83b1"),w={name:"Login",components:{Loginform:m["a"],alerts:g["a"]},data:function(){return{msg:""}},methods:{},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}}},_=w,j=(n("432d"),Object(h["a"])(_,p,k,!1,null,"e77e3424",null)),y=j.exports,D=n("4ad7"),x=(n("ac6a"),n("a4bb")),A=n.n(x),U=(n("f576"),n("365c")),O=(n("673e"),n("28a5"),new a["default"]);function M(e){if(!e||e.split(".").length<3)return!1;var t=JSON.parse(atob(e.split(".")[1])),n=new Date(1e3*t.exp),a=new Date;return a<n}function S(e){var t=e.split("."),n=JSON.parse(atob(t[1])),a=n.sub;return a}function E(e){return window.$cookies.get(e)}function z(e,t){return window.$cookies.set(e,t)}function C(e){return window.$cookies.remove(e)}var P=new Date,T=String(P.getDate()).padStart(2,"0"),$=String(P.getMonth()+1).padStart(2,"0"),H=P.getFullYear();P=H+"-"+$+"-"+T,a["default"].use(o["a"]);var q=new o["a"].Store({state:{Messages:[],alerts:{state:!1,variant:"warning",version:"default",text:"warning",versions:{profile_img:{text:{warning:"neco se nepovedlo",success:"profilovy obrazek byl uspesne ulozen"}},default:{text:{warning:"neco se nepovedlo",success:"akce probehla uspesen"}},nickname:{text:{warning:"nepodarilo se nam ulozit vasi novou prezdivku zkuste to prosim pozdeji",success:"Vase prezdivka byla uspesne zmenena"}},password_request:{text:{warning:"nepodarilo se nam poslat vam potvrzujici email s odkazem",success:"Zkontrolujte prosim svoji emailovou adresu pro pokyny k dlsim krokum"}},password_change:{text:{warning:"heslo se nepodarilo zmeni zkontrolujte prosim zpravnost stareho hesla",success:"vase heslo bylo uspesne zmeneno"}},login:{text:{jmeno_nebo_heslo:"spatne jmeno nebo heslo",not_heslo:"spatne heslo",not_email:"pravdepodobne jsi si neoveril email"}},register:{text:{not:"Jmeno nebo email uz jsou zabrane"}}}},currentMessage:[],userData:null,jwt:{token:""}},actions:{Update:function(e){return Object(U["g"])(E("token")).then(function(t){return e.commit("setUserData",{userData:{username:t.data.UserData.username,email:t.data.UserData.email,nickname:t.data.UserData.nickname,profile_img:t.data.UserData.profile_img}})})},Logout:function(e){C("token"),e.commit("logout"),L.go("login")},updateSettings:function(e,t){return Object(U["h"])(t,E("token")).then(function(t){if(t){var n=t.data["alert"];e.commit("updateUserDataFromSettings",t.data["update_data"]),e.commit("HandleAlerts",{state:!0,variant:n.variant,version:n.version,text:n.text}),"password_change"===n.version&&"success"===n.variant&&(e.dispatch("Logout"),L.go("login"))}}).catch(function(t){e.commit("HandleAlerts",{state:!0,variant:"warning",version:"profile_img",text:"warning"}),401===t.status&&(e.dispatch("Logout"),L.go("login"))})},fetchMessages:function(e){return Object(U["c"])(E("token")).then(function(t){e.commit("newMessages",{messages:t.data}),console.log(t.data)})},uploadMessage:function(e,t){var n=!0;t=JSON.parse(t);var a=S(E("token"));a!==t.email&&(n=!1);var o={audio:t.audio,username:t.username,nickname:t.nickname,message:t.message,id:t.msg_id,profile_img:t.profile_img,you:n,date:t.date};e.commit("newMessage",o)},login:function(e,t){return Object(U["a"])(t).then(function(t){if(t){var n=t.data["alert"];t.data["authenticated"]?(e.commit("setJwtToken",{jwt:t.data.token}),e.commit("setUserData",{userData:{username:t.data.UserData.username,email:t.data.UserData.email,nickname:t.data.UserData.nickname,profile_img:t.data.UserData.profile_img}}),z("token",t.data.token),L.go("/")):e.commit("HandleAlerts",{state:!0,variant:"warning",version:n.version,text:n.text})}}).catch(function(t){e.commit("HandleAlerts",{state:!0,variant:"warning",version:"profile_img",text:"warning"})})},register:function(e,t){return Object(U["e"])(t).then(function(t){console.log(t.data.registrated),t.data.registrated?L.go("/login"):e.commit("HandleAlerts",{state:!0,variant:"warning",version:"register",text:"not"})}).catch(function(e){O.$emit("failedRegistering: ",e)})},submitNewMessage:function(e,t){return Object(U["d"])(t,E("token"))},Send_password_request:function(e){return Object(U["f"])(E("token")).then(function(){return e.commit("HandleAlerts",{state:!0,variant:"success",version:"password_request",text:"success"})}).catch(function(t){e.commit("HandleAlerts",{state:!0,variant:"warning",version:"password_request",text:"warning"})})},Authenticate_password_request_token:function(e,t){return Object(U["b"])(E("token"),t)}},mutations:{HandleAlerts:function(e,t){var n=A()(t).length;1===n?e.alerts.state=t["state"]:(e.alerts.state=t.state,e.alerts.variant=t.variant,e.alerts.version=t.version,e.alerts.text=t.text)},logout:function(e){e.jwt.token=""},newMessage:function(e,t){e.Messages.forEach(function(e){e.date===t.date&&e.messages.push(t)})},newMessages:function(e,t){var n=t.messages;e.Messages=[],n.forEach(function(t){e.Messages.push(t)})},setUserData:function(e,t){e.userData=t.userData},updateUserDataFromSettings:function(e,t){var n=A()(t);e.userData[n]=t[n]},setJwtToken:function(e,t){localStorage.token=t.jwt,e.jwt.token=t.jwt}},getters:{isAuthenticated:function(){return M(E("token"))},Messages:function(e){return e.Messages},UserData:function(e){return e.userData},AlertData:function(e){return e.alerts}}});a["default"].use(s["a"]);var J=new s["a"]({routes:[{path:"/",name:"home",component:v,beforeEnter:function(e,t,n){q.getters.isAuthenticated?(null==q.getters.UserData&&q.dispatch("Update"),n()):n("/login")}},{path:"/audio",name:"audio",component:function(){return Promise.resolve().then(n.bind(null,"7db9"))}},{path:"/settings",name:"settings",component:function(){return Promise.all([n.e("about~3ee20405"),n.e("about~2d898716"),n.e("about~e00b5942"),n.e("about~6a415538"),n.e("about~a86252e3"),n.e("about~47fe49b1"),n.e("about~0c24c761"),n.e("about~e0bffda6")]).then(n.bind(null,"26d3"))},children:[{path:"change/:token",name:"Change_password",component:D["a"],beforeEnter:function(e,t,n){q.dispatch("Authenticate_password_request_token",e.params.token).then(function(e){e.data.authenticated?null==q.getters.UserData||void 0===q.getters.UserData?(q.dispatch("Update"),n()):n():n("/login")})}},{path:"update",name:"update",component:function(){return Promise.all([n.e("about~3ee20405"),n.e("about~2d898716"),n.e("about~e00b5942"),n.e("about~6a415538"),n.e("about~a86252e3"),n.e("about~47fe49b1"),n.e("about~0c24c761"),n.e("about~e0bffda6")]).then(n.bind(null,"821a"))}}],beforeEnter:function(e,t,n){q.getters.isAuthenticated?null==q.getters.UserData||void 0===q.getters.UserData?(q.dispatch("Update"),n()):n():n("/login")}},{path:"/login",name:"login",component:y,beforeEnter:function(e,t,n){q.getters.isAuthenticated?n("/"):n()}},{path:"/register",name:"register",component:function(){return n.e("chunk-66ff5407").then(n.bind(null,"73cf"))}}]});J.beforeEach(function(e,t,n){q.commit("HandleAlerts",{state:!1}),n()});var L=J,N=n("ecee"),B=n("c074"),F=n("ad3d"),R=n("2b27"),V=n.n(R),Y=n("7399"),Z=n("a250"),G=n("f87c"),I=n("daa4"),K=n.n(I),Q=K()("https://chatapp-backendapi.herokuapp.com/");K.a.set("transports",["websocket"]),a["default"].use(G["a"],Q,q),a["default"].use(o["a"]),a["default"].use(Y["a"]),N["b"].watch(),N["d"].add(B["a"]),a["default"].component("font-awesome-icon",F["a"]),a["default"].config.productionTip=!1,a["default"].use(V.a),a["default"].use(Z["a"]),new a["default"]({router:L,store:q,render:function(e){return e(r["a"])}}).$mount("#app")},8553:function(e,t,n){}});
//# sourceMappingURL=app~5a11b65b.33ec5e75.js.map