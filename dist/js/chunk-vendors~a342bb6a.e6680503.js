(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~a342bb6a"],{"15e9":function(t,i,e){"use strict";var a=e("7883");const s={fftSize:{type:Number,default:1024},canvWidth:{type:Number,default:100},canvHeight:{type:Number,default:100},radius:{type:Number,default:0},lineWidth:{type:Number,default:1},lineSpace:{type:Number,default:1},outlineColor:{type:String,default:"#0000FF"},outlineWidth:{type:Number,default:.3},barWidth:{type:Number,default:1},barLength:{type:Number,default:0},barColor:{type:[String,Array],default:()=>["#FFFFFF","#0000FF"]},progress:{type:Boolean,default:!0},progressWidth:{type:Number,default:1},progressColor:{type:String,default:"#0000FF"},progressClockwise:{type:Boolean,default:!1},outlineMeterSpace:{type:Number,default:3},playtime:{type:Boolean,default:!1},playtimeFont:{type:String,default:"14px Monaco"},playtimeColor:{type:String,default:"#00f"},rotateGraph:{type:Boolean,default:!1},rotateSpeed:{type:Number,default:.001}},r={name:"av-circle",mixins:[a["a"]],props:s,data(){return{rotate:1.5,audio:null,analyser:null,ctx:null,audioCtx:null}},methods:{mainLoop:function(){const t=this.canvWidth/2,i=this.canvHeight/2,e=this.radius?this.radius:Math.round(this.canvWidth/2*.7),a=this.lineWidth,s=this.lineSpace,r=Math.ceil(a+s),n=this.analyser.frequencyBinCount,h=new Uint8Array(n),l=(a+s)/h.length*(2*Math.PI),o=this.barLength>0?this.barLength:this.canvWidth/2-e;let c=Math.PI*this._rotate();this._setCanvas(),this.analyser.getByteFrequencyData(h),this.outlineWidth>0&&this._drawOutline(e,t,i),this.progress&&this._drawProgress(e,t,i),this.playtime&&this._drawPlaytime(t,i),this.ctx.lineWidth=this.barWidth,this.ctx.strokeStyle=this._setBarColor(t,i),h.forEach((a,s)=>{if(c+=l,s%r)return;const n=Math.round(h.slice(s,s+r).reduce((t,i)=>i+t,0)/r),u=e+n/255*o;this.ctx.beginPath(),this.ctx.moveTo(e*Math.cos(c)+t,e*Math.sin(c)+i),this.ctx.lineTo(u*Math.cos(c)+t,u*Math.sin(c)+i),this.ctx.stroke()}),requestAnimationFrame(this.mainLoop)},_setCanvas:function(){this.ctx.clearRect(0,0,this.canvWidth,this.canvHeight),this.canvFillColor&&(this.ctx.fillStyle=Array.isArray(this.canvFillColor)?this.fillGradient(this.canvFillColor):this.canvFillColor,this.ctx.fillRect(0,0,this.canvWidth,this.canvHeight))},_drawProgress:function(t,i,e){const a=this.audio.currentTime/this.audio.duration*2*Math.PI,s=1.5*Math.PI+a;a&&(this.ctx.lineWidth=this.progressWidth,this.ctx.strokeStyle=this.progressColor,this.ctx.beginPath(),this.ctx.arc(i,e,t-this.outlineWidth-this.outlineMeterSpace,1.5*Math.PI,s,this.progressClockwise),this.ctx.stroke())},_drawOutline:function(t,i,e){this.ctx.beginPath(),this.ctx.strokeStyle=this.outlineColor,this.ctx.lineWidth=this.outlineWidth,this.ctx.arc(i,e,t,0,2*Math.PI),this.ctx.stroke()},_drawPlaytime:function(t,i){const e=Math.floor(this.audio.currentTime/60),a=Math.floor(this.audio.currentTime)%60,s=a<10?`0${a}`:`${a}`,r=`${e}:${s}`,n=Math.ceil(this.ctx.measureText(r).width);this.ctx.font=this.playtimeFont,this.ctx.fillStyle=this.playtimeColor,this.ctx.fillText(r,t-Math.round(n/2),i+.25*parseInt(this.playtimeFont))},_rotate:function(){return this.rotateGraph?this.rotate=3.5===this.rotate?1.5:this.rotate+this.rotateSpeed:this.rotate=1.5,this.rotate},_setBarColor:function(t,i){if(!Array.isArray(this.barColor))return this.barColor;const e=this.ctx.createRadialGradient(t,i,this.canvWidth/2,t,i,0);let a=0;return this.barColor.forEach(t=>{e.addColorStop(a,t),a+=1/this.barColor.length}),e}}};i["a"]=r},"385f":function(t,i,e){"use strict";var a=e("7883");const s={barWidth:{type:Number,default:5},barSpace:{type:Number,default:1},barColor:{type:[String,Array],default:"#0A0AFF"},capsHeight:{type:Number,default:0},capsDropSpeed:{type:Number,default:.9},capsColor:{type:String,default:"#A0A0FF"},brickHeight:{type:Number,default:0},brickSpace:{type:Number,default:1},symmetric:{type:Boolean,default:!1},fftSize:{type:Number,default:1024}},r={name:"av-bars",mixins:[a["a"]],props:s,data(){return{audio:null,analyser:null,ctx:null,audioCtx:null,caps:Array.apply(null,Array(this.fftSize/2)).map(()=>0)}},methods:{mainLoop:function(){const t=this.analyser.frequencyBinCount,i=new Uint8Array(t),e=this.barWidth>=this.canvWidth?this.canvWidth:this.barWidth,a=Math.round((e+this.barSpace)/t*this.canvWidth),s=Array.isArray(this.barColor)?this.fillGradient(this.barColor):this.barColor;let r=0;this.analyser.getByteFrequencyData(i),this._fillCanvasBG(),i.forEach((t,n)=>{if(n%a)return;const h=Math.round(i.slice(n,n+a).reduce((t,i)=>i+t,0)/a),l=h/255*this.canvHeight;this.capsHeight&&this._drawCap(n,e,r,h),this.ctx.fillStyle=s,this._drawBar(e,l,r),r+=e+this.barSpace}),requestAnimationFrame(this.mainLoop)},_fillCanvasBG:function(){const t=this.canvWidth,i=this.canvHeight;this.ctx.clearRect(0,0,t,i),this.canvFillColor&&(this.ctx.fillStyle=Array.isArray(this.canvFillColor)?this.fillGradient(this.canvFillColor):this.canvFillColor,this.ctx.fillRect(0,0,t,i))},_drawBar:function(t,i,e){this.brickHeight?this._drawBrickBar(t,i,e):this.ctx.fillRect(e,this.canvHeight-i-this._symAlign(i),t,i)},_drawBrickBar:function(t,i,e){for(let a=0;a<i;a+=this.brickHeight+this.brickSpace)this.ctx.fillRect(e,this.canvHeight-i+a-this._symAlign(i),t,this.brickHeight)},_drawCap:function(t,i,e,a){const s=this.caps[t]<=a?a:this.caps[t]-this.capsDropSpeed,r=s/255*this.canvHeight,n=this.canvHeight-r-this.capsHeight-this._symAlign(r);this.ctx.fillStyle=this.capsColor,this.ctx.fillRect(e,n,i,this.capsHeight),this.symmetric&&this.ctx.fillRect(e,this.canvHeight-n-this.capsHeight,i,this.capsHeight),this.caps[t]=s},_symAlign:function(t){return this.symmetric?(this.canvHeight-t)/2:0}}};i["a"]=r},7883:function(t,i,e){"use strict";const a={audioSrc:{type:String,default:null},refLink:{type:String,default:null},audioControls:{type:Boolean,default:!0},corsAnonym:{type:Boolean,default:!1},audioClass:{type:String,default:null},canvWidth:{type:Number,default:300},canvHeight:{type:Number,default:80},canvClass:{type:String,default:null},canvTop:{type:Boolean,default:!1},canvFillColor:{type:[String,Array],default:null}},s={createHTMLElements:function(){const t=document.createElement("canvas"),i=document.createElement("div");let e=null,a=null;this.refLink?a=this.$parent.$refs[this.refLink]:(a=document.createElement("audio"),e=document.createElement("div"),a.setAttribute("src",this.audioSrc),this.audioControls&&a.setAttribute("controls",!0),this.audioClass&&a.setAttribute("class",this.audioClass),this.corsAnonym&&(a.crossOrigin="anonymous"),e.appendChild(a),this.$el.appendChild(e)),this.canvClass&&t.setAttribute("class",this.canvClass),this.canvWidth&&t.setAttribute("width",this.canvWidth),this.canvHeight&&t.setAttribute("height",this.canvHeight),i.appendChild(t),this.canvTop?this.$el.insertBefore(i,e):this.$el.appendChild(i),this.ctxWrapper=t,this.ctx=t.getContext("2d"),this.audio=a},setAnalyser:function(){let t=null,i=null;this.refLink?this.$avAudioRefs[this.refLink]?(t=this.$avAudioRefs[this.refLink].src,i=this.$avAudioRefs[this.refLink].ctx,this.analyser=i.createAnalyser()):(i=new AudioContext,this.analyser=i.createAnalyser(),t=i.createMediaElementSource(this.audio),this.$avAudioRefs[this.refLink]={src:t,ctx:i}):(i=new AudioContext,this.analyser=i.createAnalyser(),t=i.createMediaElementSource(this.audio)),t.connect(this.analyser),this.analyser.fftSize=this.fftSize,this.analyser.connect(i.destination),this.audioCtx=i},fillGradient:function(t){const i=this.canvWidth,e=this.canvHeight,a=this.ctx.createLinearGradient(i/2,0,i/2,e);let s=0;return t.forEach(i=>{a.addColorStop(s,i),s+=1/t.length}),a}};i["a"]={props:a,render:t=>t("div"),mounted(){this.createHTMLElements(),this.setAnalyser(),this.mainLoop()},beforeDestroy(){this.audioCtx.close()},methods:s}}}]);
//# sourceMappingURL=chunk-vendors~a342bb6a.e6680503.js.map